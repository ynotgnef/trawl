pipeline {
    agent none
    stages {
        stage('test') {
            agent { label 'medium' }
            steps {
                //git diff-tree --no-commit-id --name-only -r <commit_hash> to get list of changed files
                //run rspec on script for changes
                //run cucumber on app
                //update test status
                //continue if passing AND master branch
                echo 'test'
            }
        }
        stage('generate_position') {
            agent { label 'medium' }
            steps {
                echo 'generate_position'
            }
        }
        stage('update_position_to_app') {
            agent { label 'medium' } //'micro' }
            steps {
                echo 'update_position_to_app'
            }
        }
        stage('wait_for_approval') {
            agent { label 'medium' } //'micro' }
            steps {

            }
        }
        stage('execute_position') {
            agent { label 'medium' } //'micro' }
            steps {
                echo 'execute_position'
            }

        }
        stage('send_notification') {
            agent { label 'master' }
            steps {
                echo 'notification'
            }
        }

    }
}